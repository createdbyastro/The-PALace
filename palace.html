<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Booking - The Palace</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: #F0F8FF;
            color: #000000;
        }

        /* Header */
        .navbar {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo-item {
            margin-left: 30px;
        }

        .logo {
            font-size: 26px;
            font-weight: 700;
            color: #000000; 
        }
            
        .logo span {
            color: #98B3F9;
        }

        .menu-icon {
            font-size: 30px;
            cursor: pointer;
            display: none; 
            margin-left: 20px;
        }

        .navbar .nav-links {
            display: flex; 
            list-style: none; 
            gap: 25px; 
            margin: 0; 
            padding: 0; 
            align-items: center; 
        }
        
        .navbar .nav-links a {
            font-weight: 900;
            transition: color 0.3s;
            color: #000000;
            font-size: 14px;
            text-decoration: none;
        }
            
        .navbar .nav-links a:hover {
            color: #98B3F9;
        }  

        /* Signin/Signup Buttons */
        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-right: 30px;
        }

        .signin-btn, .signup-btn {
            padding: 8px 20px;
            border-radius: 4px;
            font-weight: 900;
            font-size: 14px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .signin-btn {
            color: #333;
            background: transparent;
            border: 1px solid #ddd;
        }

        .signin-btn:hover {
            background: #f5f5f5;
            border-color: #ccc;
        }

        .signup-btn {
            background-color: #98B3F9;
            color: white;
            border: 1px solid #98B3F9;
        }

        .signup-btn:hover {
            background-color: #7a9cf7;
            border-color: #7a9cf7;
        }

        .divider {
            color: #ddd;
            font-weight: 300;
        }

        /* Search Bar */
        .search-bar-container { 
            padding: 20px 0;
            background-color: #F0F8FF; 
        }
        .search-bar {
            background-color: white;
            border-radius: 8px;
            padding: 10px 20px;
            margin: 0 auto; 
            max-width: 900px; 
            border: 1px solid #e0e0e0; 
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            align-items: center; 
        }

        .search-bar select, 
        .search-bar input[type="date"] {
            border: 1px solid #98b3f983; 
            border-radius: 4px;
            padding: 8px 12px;
            font-weight: 500; 
            min-width: 150px;
            height: 40px;
            font-size: 14px;
        }

        a { 
            text-decoration: none;
        }

        .search-bar button {
            background-color: #98B3F9; 
            color: white;
            border: none;
            padding: 0 15px;
            border-radius: 4px;
            cursor: pointer;
            height: 40px;
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 500;
            font-size: 14px;
        }
        
        .search-bar button svg { 
            width: 18px;
            height: 18px;
        }

        .search-bar select {
            min-width: 150px;
        }

        .search-bar input[type="date"] {
            min-width: 130px; 
        }

        .search-bar button:hover {
            background-color: #7a9cf7; 
        }
     
        .content, .special-offers, .footer { 
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .special-offers {
            padding-top: 20px; 
            padding-bottom: 40px;
        }

        .special-offers .section-title { 
            text-align: center;
            font-size: 36px;
            margin-bottom: 50px;
            font-weight: 600;
            color: #000000; 
        }

        .offers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 30px;
        }

        .special-offers .offer-card { 
            background-color: #fff;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 12px #98B3F9; 
            transition: transform 0.3s;
        }
        .special-offers .offer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
        }

        .special-offers .offer-image { 
            height: 200px; 
            background-size: cover;
            background-position: center;
        }

        .special-offers .offer-details { 
            padding: 20px; 
        }

        .special-offers .offer-details h3.offer-title {
            font-size: 22px; 
            margin-bottom: 10px;
            color: #000;
            font-weight: bold; 
        }

        .special-offers .offer-details p.offer-description {
            margin-bottom: 15px;
            color: #555;
            font-size: 15px;
            line-height: 1.5;
        }
        
        .palace-hotel-listings-section {
            padding: 40px 0; 
            background-color: #F0F8FF; 
        }

        .palace-hotel-listings-section h2 {
            text-align: center;
            font-size: 36px;
            margin-bottom: 50px;
            font-weight: 600;
            color: #000000;
        }

        .dynamic-hotel-card {
            background-color: #fff;
            border-radius: 20px; 
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(152, 179, 249, 0.7); 
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex; 
            flex-direction: column; 
        }

        .dynamic-hotel-card:hover {
            transform: translateY(-5px); 
            box-shadow: 0 6px 16px rgba(152, 179, 249, 0.9); 
        }

        .dynamic-hotel-image {
            height: 200px; 
            background-size: cover;
            background-position: center;
            flex-shrink: 0; 
        }

        .dynamic-hotel-content {
            padding: 20px; 
            display: flex;
            flex-direction: column;
            flex-grow: 1; 
        }

        .dynamic-hotel-content h3 {
            font-size: 20px; 
            margin-bottom: 5px; 
            color: #000; 
        }
        .dynamic-hotel-content h3 .room-type-subtitle { 
            font-weight: normal;
            font-size: 0.85em; 
            color: #444; 
            display: block; 
            margin-top: 2px;
        }

        .dynamic-hotel-content p.hotel-description { 
            margin-top: 5px; 
            margin-bottom: 10px; 
            color: #555; 
            font-size: 14px; 
            line-height: 1.4; 
            height: calc(1.4em * 3); 
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3; 
            -webkit-box-orient: vertical;
            flex-grow: 1; 
        }

        .dynamic-hotel-meta { 
            display: flex;
            justify-content: space-between; 
            align-items: center;
            flex-wrap: wrap; 
            gap: 10px; 
            margin-bottom: 15px; 
            margin-top: auto; 
        }

        .dynamic-hotel-price { 
            font-weight: 600; 
            color: #333; 
            font-size: 16px; 
        }
        
        .dynamic-hotel-location { 
            font-size: 13px; 
            color: #666;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .dynamic-hotel-location i {
            margin-right: 5px;
            color: #98B3F9;
        }
        .hotel-rating { 
            font-size: 13px; 
            color: #555;
        }
        .hotel-rating i.fa-star { 
            color: #FFD700; 
        }

        .dynamic-book-offer { 
            display: block;
            text-align: center;
            background-color: #333; 
            color: white; 
            padding: 10px 12px; 
            border-radius: 4px; 
            font-weight: 500; 
            font-size: 14px; 
            transition: background-color 0.3s;
            text-decoration: none;
            margin-top: 10px; 
            cursor: pointer; 
        }

        .dynamic-book-offer:hover {
            background-color: #98B3F9; 
            color: white; 
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s linear 0.3s;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease;
        }

        .modal-content {
            background-color: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            color: #777;
            background: none;
            border: none;
            cursor: pointer;
            line-height: 1;
        }
        .modal-close-btn:hover {
            color: #333;
        }
        
        .modal-header {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }
        @media (min-width: 600px) {
            .modal-header {
                flex-direction: row; 
            }
        }


        .modal-image-container {
            flex-shrink: 0;
            width: 100%; 
            max-width: 300px; 
            margin: 0 auto 15px auto; 
        }
         @media (min-width: 600px) {
            .modal-image-container {
                width: 40%;
                margin: 0;
            }
        }


        .modal-room-image {
            width: 100%;
            height: auto;
            max-height: 250px;
            object-fit: cover;
            border-radius: 8px;
            display: block;
        }

        .modal-info {
            flex-grow: 1;
        }

        .modal-info h2 {
            font-size: 26px;
            color: #333;
            margin-bottom: 8px;
        }
        .modal-info .room-type-subtitle-modal {
            font-size: 18px;
            font-weight: normal;
            color: #555;
            display: block;
            margin-bottom: 12px;
        }

        .modal-info .modal-price {
            font-size: 22px;
            font-weight: bold;
            color: #98B3F9;
            margin-bottom: 10px;
        }
        .modal-info .modal-detail-item {
            font-size: 15px;
            color: #666;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
        }
        .modal-info .modal-detail-item i {
            margin-right: 8px;
            color: #98B3F9;
            width: 16px; 
            text-align: center;
        }


        .modal-section {
            margin-bottom: 20px;
        }

        .modal-section h3 {
            font-size: 20px;
            color: #333;
            margin-bottom: 12px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }

        .modal-section p {
            font-size: 15px;
            line-height: 1.6;
            color: #555;
        }

        .amenities-list {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
        }

        .amenities-list li {
            font-size: 15px;
            color: #555;
            display: flex;
            align-items: center;
        }

        .amenities-list li i {
            margin-right: 8px;
            color: #98B3F9;
        }

        .reviews-section .review-item {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .reviews-section .review-item p {
            margin-bottom: 5px;
            font-size: 14px;
        }

        .reviews-section .review-item .reviewer-name {
            font-weight: bold;
            color: #444;
            font-size: 13px;
            text-align: right;
        }

        .reviews-section .review-stars i.fa-star {
             color: #FFD700;
             font-size: 13px;
        }


        .modal-payment-btn {
            display: block;
            width: 100%;
            padding: 14px 20px;
            background-color: #98B3F9;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        .modal-payment-btn:hover {
            background-color: #7a9cf7;
        }


        /* Footer */
        footer {
            background: #98B3F9;
            color: #000000;
            padding: 50px 0 20px;
        }

        .footer-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-section {
            flex: 1;
            min-width: 250px;
            margin-bottom: 30px;
            padding: 0 15px;
        }
        .footer-section.footer-brand { 
            flex-basis: 100%; 
        }
        @media (min-width: 768px) {
            .footer-section.footer-brand {
                flex-basis: auto; 
            }
        }


        .footer-section h3 {
            color: #000000;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: 600;
        }

        .footer-section p { 
            margin: 10px 0;
            line-height: 1.6;
            font-weight: 300;
            color: #000000;
            text-align: left; 
        }
        .footer-section .footer-about { 
             font-size: 14px;
        }


        .footer-section ul {
            list-style: none;
            padding: 0;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section ul li a {
            color: #000000;
            text-decoration: none;
            transition: color 0.3s;
            font-weight: 300;
            font-size: 14px;
        }

        .footer-section ul li a:hover {
            color: #ffffff;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            color: #000000;
            font-size: 20px;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: #ffffff;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(0,0,0,0.2);
            margin-top: 30px;
            font-size: 14px;
            color: #000000;
            font-weight: 300;
        }
        .copyright p {
            text-align: center; 
        }


        .contact-info {
            margin-top: 20px;
        }

        .contact-info p {
            display: flex;
            align-items: flex-start; 
            margin-bottom: 10px;
            font-weight: 300;
            color: #000000;
            font-size: 14px;
        }

        .contact-info i {
            margin-right: 10px;
            color: #000000;
            width: 20px;
            text-align: center;
            margin-top: 3px; 
        }
        
        /* Responsive adjustments */
        @media (max-width: 992px) { 
            .search-bar {
                flex-direction: column;
                align-items: stretch; 
                max-width: 90%;
            }
            .search-bar select,
            .search-bar input[type="date"],
            .search-bar button {
                width: 100%; 
                min-width: auto;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 15px 10px; 
            }
            .logo-item {
                margin-left: 10px;
            }
            .auth-buttons {
                margin-right: 10px;
            }
            .menu-icon {
                display: block; 
                order: -1; 
                margin-right: 15px;
                margin-left: 0;
            }
            .navbar .nav-links {
                display: none; 
                position: absolute;
                top: 100%; 
                left: 0;
                background-color: #ffffff;
                width: 100%; 
                padding: 10px 0;
                box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                flex-direction: column; 
                align-items: center;
            }
            .navbar .nav-links.active {
                display: flex; 
            }
            .navbar .nav-links a {
                padding: 10px 0;
                width: 100%;
                text-align: center;
                border-bottom: 1px solid #f0f0f0;
            }
            .navbar .nav-links a:last-child {
                border-bottom: none;
            }

            .footer-container {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            .footer-section {
                min-width: 100%;
                padding: 0;
            }
            .footer-section p, .footer-section ul li a {
                text-align: center;
            }
            .social-links {
                justify-content: center;
            }
            .contact-info p {
                 justify-content: center;
                 text-align: center;
            }
             .contact-info i {
                margin-top: 0; 
            }
             .modal-content {
                padding: 20px;
            }
            .modal-info h2 {
                font-size: 22px;
            }
            .modal-info .room-type-subtitle-modal {
                font-size: 16px;
            }
            .modal-info .modal-price {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <header class="navbar">
        <div class="menu-icon" onclick="toggleMenu()">&#9776;</div>
        <div class="logo-item"><a href="index.html" class="logo">THE PALaCE<span>.</span></a></div>
        <nav>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html">HOME</a></li>
                <li><a href="palace.html">HOTEL</a></li>
                <li><a href="packages.html">PACKAGES</a></li> 
                <li><a href="about.html">ABOUT</a></li> 
            </ul>
        </nav>
        <div class="auth-buttons">
            <a href="login.html" class="signin-btn">LOGIN</a>
            <span class="divider">|</span>
            <a href="login.html" class="signup-btn">SIGN-UP</a>
        </div>
        
    </header>
    
    <div class="search-bar-container">
        <div class="search-bar">
            <select name="location" id="search-location">
                <option value="" disabled selected>LOCATION</option>
                <option value="all">All</option>
                <option value="Johannesburg">Johannesburg</option>
                <option value="Cape-Town">Cape Town</option>
                <option value="Durban">Durban</option>
                <option value="Elizabeth">Elizabeth</option> <option value="Potchefstroom">Potchefstroom</option>
                <option value="Pretoria">Pretoria</option>
                <option value="Sandton">Sandton</option>
                <option value="Polokwane">Polokwane</option>
            </select>
            <select name="room-type" id="search-room-type">
                <option value="" disabled selected>ROOM TYPE</option>
                <option value="all">All Types</option>
                <option value="Single Room">Single Room</option>
                <option value="Double Room">Double Room</option>
                <option value="Suites">Suites</option>
            </select>
            <input type="date" name="check-in-date" id="search-check-in" placeholder="Check-in Date">
            <input type="date" name="check-out-date" id="search-check-out" placeholder="Check-out Date">
            <button onclick="filterRoomTypes()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                </svg>
                Search
            </button>
        </div>
    </div>

    <section class="palace-hotel-listings-section">
        <div class="container">
            <h2>Our Hotel Rooms</h2>
            <div id="room-types-container-grid" class="offers-grid">
                <p id="loading-message" style="text-align:center; grid-column: 1 / -1;">Loading hotel rooms...</p>
            </div>
        </div>
    </section>

    <div class="container">
        <section class="special-offers">
            <h2 class="section-title">Special Offers</h2>
            <div class="offers-grid">
                <div class="offer-card">
                    <div class="offer-image" style="background-image: url('https://placehold.co/600x400/98B3F9/FFFFFF?text=Offer+1');" onerror="this.style.backgroundImage='url(https://placehold.co/600x400/E0E0E0/B0B0B0?text=Image+Error)'"></div>
                    <div class="offer-details">
                        <h3 class="offer-title">Weekend Getaway</h3>
                        <p class="offer-description">Book 2 nights and get 1 night free. Valid for weekend stays only.</p>
                         <a href="#" class="dynamic-book-offer">View Offer</a>
                    </div>
                </div>
                <div class="offer-card">
                    <div class="offer-image" style="background-image: url('https://placehold.co/600x400/98B3F9/FFFFFF?text=Offer+2');" onerror="this.style.backgroundImage='url(https://placehold.co/600x400/E0E0E0/B0B0B0?text=Image+Error)'"></div>
                    <div class="offer-details">
                        <h3 class="offer-title">Early Bird Special</h3>
                        <p class="offer-description">Book 30 days in advance and get 20% off your stay.</p>
                        <a href="#" class="dynamic-book-offer">View Offer</a>
                    </div>
                </div>
                <div class="offer-card">
                    <div class="offer-image" style="background-image: url('https://placehold.co/600x400/98B3F9/FFFFFF?text=Offer+3');" onerror="this.style.backgroundImage='url(https://placehold.co/600x400/E0E0E0/B0B0B0?text=Image+Error)'"></div>
                    <div class="offer-details">
                        <h3 class="offer-title">Family Package</h3>
                        <p class="offer-description">Kids stay free and get complimentary breakfast for the whole family.</p>
                        <a href="#" class="dynamic-book-offer">View Offer</a>
                    </div>
                </div>
                <div class="offer-card">
                    <div class="offer-image" style="background-image: url('https://placehold.co/600x400/98B3F9/FFFFFF?text=Offer+4');" onerror="this.style.backgroundImage='url(https://placehold.co/600x400/E0E0E0/B0B0B0?text=Image+Error)'"></div>
                    <div class="offer-details">
                        <h3 class="offer-title">Honeymoon Suite</h3>
                        <p class="offer-description">Special romantic package with champagne and couples massage.</p>
                        <a href="#" class="dynamic-book-offer">View Offer</a>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="roomDetailModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn" onclick="closeRoomModal()">&times;</button>
            
            <div class="modal-header">
                <div class="modal-image-container">
                    <img id="modalRoomImage" src="https://placehold.co/600x400/E0E0E0/B0B0B0?text=Room+Image" alt="Room Image" class="modal-room-image">
                </div>
                <div class="modal-info">
                    <h2 id="modalHotelName">Hotel Name</h2>
                    <span id="modalRoomType" class="room-type-subtitle-modal">Room Type</span>
                    <p id="modalRoomPrice" class="modal-price">R0/night</p>
                    <p class="modal-detail-item"><i class="fas fa-map-marker-alt"></i> <span id="modalHotelAddress">Hotel Address</span></p>
                    <p class="modal-detail-item"><i class="fas fa-users"></i> Capacity: <span id="modalRoomCapacity">0</span></p>
                    <p class="modal-detail-item"><i class="fas fa-star"></i> Rating: <span id="modalHotelRating">N/A</span> (<span id="modalHotelReviews">0</span> reviews)</p>
                    <p class="modal-detail-item"><i class="fas fa-road"></i> Distance: <span id="modalHotelDistance">N/A</span></p>
                </div>
            </div>

            <div class="modal-section">
                <h3>Room Description</h3>
                <p id="modalRoomDescription">Full description of the room...</p>
            </div>
            
            <div class="modal-section">
                <h3>Hotel Description</h3>
                <p id="modalHotelOverallDescription">Overall description of the hotel...</p>
            </div>

            <div class="modal-section">
                <h3>Amenities</h3>
                <ul id="modalAmenitiesList" class="amenities-list">
                    </ul>
            </div>

            <div class="modal-section reviews-section">
                <h3>Guest Reviews</h3>
                <div id="modalReviewsContainer">
                    </div>
            </div>

            <button class="modal-payment-btn" href="payment.html">Proceed to Payment</button>
        </div>
    </div>


    <footer>
        <div class="footer-container">
            <div class="footer-section footer-brand">
                <a href="index.html" class="logo">The Palace<span>.</span></a>
                <p class="footer-about">
                    Redefining luxury hospitality with exceptional service and unforgettable experiences at our premier locations worldwide. 
                    Since 1985, we've been committed to excellence in every detail.
                </p>
            </div>
            
            <div class="footer-section">
                <h3>Navigation</h3>
                <ul class="footer-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="palace.html">Hotel</a></li>
                    <li><a href="#packages">Packages</a></li>
                    <li><a href="#offers">Special Offers</a></li>
                    <li><a href="#about">About Us</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Contact Us</h3>
                <div class="contact-info">
                    <p>
                        <i class="fas fa-map-marker-alt"></i>
                        <span>The Palace Headquarters<br>
                        123 Luxury Avenue<br>
                        Mahikeng, 2745, South Africa</span>
                    </p>
                    <p>
                        <i class="fas fa-phone"></i>
                        <span>+27 11 272 4567 (Reservations)<br>
                        +27 82 123 4567 (Support)</span>
                    </p>
                    <p>
                        <i class="fas fa-envelope"></i>
                        <span>reservations@thepalace.com<br>
                        info@thepalace.com</span>
                    </p>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Connect With Us</h3>
                <div class="social-links">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; 2025 The Palace Hotels & Resorts. All Rights Reserved.</p>
            <p><a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
            <p style="margin-top: 10px;">The Palace is a registered trademark of Palace Hospitality Group (Pty) Ltd</p>
        </div>
    </footer>

    <script>
        // Function to toggle mobile menu
        function toggleMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }

        // --- embeded hotel data ---
        const embeddedHotelsData = [
          {
            "id": 1,
            "name": "The Palace Johannesburg",
            "location": "Johannesburg",
            "address": "15 Becker Street, Lenchele 0012",
            "description": "Luxury 5-star hotel in the heart of Johannesburg with panoramic city views.",
            "price_range": { "single": 1500, "double": 2200, "suite": 3500 },
            "amenities": ["Free WiFi", "Swimming Pool", "Fitness Center", "Restaurant", "Spa", "Room Service", "Air Conditioning", "Parking"],
            "room_types": [
              { "id": 11, "type": "Single Room", "description": "City view from the top of the world", "price": 1299.99, "capacity": 1, "images": "hotelimag/imag (1).jpg" },
              { "id": 12, "type": "Single Room", "description": "City view from the top of the world", "price": 1549.99, "capacity": 1, "images": "hotelimag/imag (2).jpg" },
              { "id": 13, "type": "Single Room", "description": "City view from the top of the world", "price": 1449.99, "capacity": 1, "images": "hotelimag/imag (3).jpg" },
              { "id": 14, "type": "Single Room", "description": "City view from the top of the world", "price": 1389.99, "capacity": 1, "images": "hotelimag/imag (4).jpg" },
              { "id": 15, "type": "Single Room", "description": "City view from the top of the world", "price": 1299.99, "capacity": 1, "images": "hotelimag/imag (5).jpg" },
              { "id": 16, "type": "Single Room", "description": "City view from the top of the world", "price": 1599.99, "capacity": 1, "images": "hotelimag/imag (6).jpg" },
              { "id": 117, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (7).jpg" },
              { "id": 118, "type": "Double Room", "description": "Double room with balcony", "price": 2200, "capacity": 2, "images": "hotelimag/imag (8).jpg" },
              { "id": 119, "type": "Double Room", "description": "Executive double room", "price": 2200, "capacity": 2, "images": "hotelimag/imag (9).jpg" },
              { "id": 120, "type": "Double Room", "description": "Family double room (extra cot available)", "price": 2200, "capacity": 2, "images": "hotelimag/imag (10).jpg" },
              { "id": 121, "type": "Double Room", "description": "Pool view double room", "price": 2200, "capacity": 2, "images": "hotelimag/imag (11).jpg" },
              { "id": 122, "type": "Double Room", "description": "Standard double room", "price": 2200, "capacity": 2, "images": "hotelimag/imag (12).jpg" },
              { "id": 1123, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (13).jpg" },
              { "id": 1124, "type": "Suites", "description": "Penthouse suite, panoramic views", "price": 3500, "capacity": 2, "images": "hotelimag/imag (14).jpg" },
              { "id": 1125, "type": "Suites", "description": "Junior suite with kitchenette", "price": 3500, "capacity": 2, "images": "hotelimag/imag (15).jpg" },
              { "id": 1126, "type": "Suites", "description": "Presidential suite, 2 bedrooms", "price": 3500, "capacity": 2, "images": "hotelimag/imag (16).jpg" },
              { "id": 1127, "type": "Suites", "description": "Honeymoon suite with jacuzzi", "price": 3500, "capacity": 2, "images": "hotelimag/imag (17).jpg" },
              { "id": 1128, "type": "Suites", "description": "Business suite with office space", "price": 3500, "capacity": 2, "images": "hotelimag/imag (18).jpg" }
            ],
            "distance": "1.5 km from city center", "rating": 4.5, "reviews": 128
          },
          {
            "id": 2, "name": "The Palace Cape Town", "location": "Cape-Town", "address": "42 Ocean View Drive, Waterfront 8001", "description": "Beachfront luxury hotel with stunning views of Table Mountain.", "price_range": { "single": 1800, "double": 2500, "suite": 4000 }, "amenities": ["Free WiFi", "Swimming Pool", "Fitness Center", "Restaurant", "Spa", "Beach Access", "Air Conditioning", "Valet Parking"],
            "room_types": [
              { "id": 21, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1250, "capacity": 1, "images": "hotelimag/imag (19).jpg" },
              { "id": 22, "type": "Single Room", "description": "Ocean view room with single bed", "price": 10, "capacity": 1, "images": "hotelimag/imag (20).jpg" },
              { "id": 23, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (21).jpg" },
              { "id": 24, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (22).jpg" },
              { "id": 25, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (23).jpg" },
              { "id": 26, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (24).jpg" },
              { "id": 227, "type": "Double Room", "description": "Spacious room with two beds, ideal for partners or friends", "price": 2200, "capacity": 2, "images": "hotelimag/imag (25).jpg" },
              { "id": 228, "type": "Double Room", "description": "Spacious room with two beds, ideal for partners or friends", "price": 2200, "capacity": 2, "images": "hotelimag/imag (26).jpg" },
              { "id": 229, "type": "Double Room", "description": "Spacious room with two beds, ideal for partners or friends", "price": 2200, "capacity": 2, "images": "hotelimag/imag (27).jpg" },
              { "id": 230, "type": "Double Room", "description": "Spacious room with two beds, ideal for partners or friends", "price": 2200, "capacity": 2, "images": "hotelimag/imag (28).jpg" },
              { "id": 231, "type": "Double Room", "description": "Spacious room with two beds, ideal for partners or friends", "price": 2200, "capacity": 2, "images": "hotelimag/imag (29).jpg" },
              { "id": 232, "type": "Double Room", "description": "Spacious room with two beds, ideal for partners or friends", "price": 2200, "capacity": 2, "images": "hotelimag/imag (30).jpg" },
              { "id": 2233, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (31).jpg" },
              { "id": 2234, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (32).jpg" },
              { "id": 2235, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (33).jpg" },
              { "id": 2236, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (34).jpg" },
              { "id": 2237, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (35).jpg" },
              { "id": 2238, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (36).jpg" }
            ],
            "distance": "1.5 km from city center", "rating": 4.1, "reviews": 167
          },
          {
            "id": 3, "name": "The Palace Durban", "location": "Durban", "address": "42 Ocean View Drive, Waterfront 8001", "description": "Beachfront luxury hotel with stunning views.", "price_range": { "single": 1800, "double": 2500, "suite": 4000 }, "amenities": ["Free WiFi", "Swimming Pool", "Fitness Center", "Restaurant", "Spa", "Beach Access", "Air Conditioning", "Valet Parking"],
            "room_types": [
                { "id": 31, "type": "Single Room", "description": "Cozy room with single bed, perfect for solo travelers", "price": 1500, "capacity": 1, "images": "hotelimag/imag (37).jpg" },
                { "id": 32, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (34).jpg" }, /* Note: image (34).jpg is repeated, might be intended or a typo in original data */
                { "id": 33, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (39).jpg" },
                { "id": 34, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (40).jpg" },
                { "id": 35, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (41).jpg" },
                { "id": 36, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (42).jpg" },
                { "id": 337, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (43).jpg" },
                { "id": 338, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (44).jpg" },
                { "id": 339, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (45).jpg" },
                { "id": 340, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (46).jpg" },
                { "id": 341, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (47).jpg" },
                { "id": 342, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (48).jpg" },
                { "id": 3343, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (49).jpg" },
                { "id": 3344, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (50).jpg" },
                { "id": 3345, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (51).jpg" },
                { "id": 3346, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (52).jpg" },
                { "id": 3347, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (53).jpg" },
                { "id": 3348, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (54).jpg" }
            ],
            "distance": "1.5 km from city center", "rating": 3.8, "reviews": 128
          },
          {
            "id": 4, "name": "The Palace-Sandton", "location": "Sandton", "address": "42 Ocean View Drive, Waterfront 8001", "description": "Beachfront luxury hotel with stunning views of Table Mountain.", "price_range": { "single": 1800, "double": 2500, "suite": 4000 }, "amenities": ["Free WiFi", "Swimming Pool", "Fitness Center", "Restaurant", "Spa", "Beach Access", "Air Conditioning", "Valet Parking"],
            "room_types": [
                { "id": 41, "type": "Single Room", "description": "Cozy room with single bed, perfect for solo travelers", "price": 1500, "capacity": 1, "images": "hotelimag/imag (55).jpg" },
                { "id": 42, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (56).jpg" },
                { "id": 43, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (57).jpg" },
                { "id": 44, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (58).jpg" },
                { "id": 45, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (59).jpg" },
                { "id": 46, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (60).jpg" },
                { "id": 447, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (61).jpg" },
                { "id": 448, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (62).jpg" },
                { "id": 449, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (63).jpg" },
                { "id": 450, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (64).jpg" },
                { "id": 451, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (65).jpg" },
                { "id": 452, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (66).jpg" },
                { "id": 4453, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (67).jpg" },
                { "id": 4454, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (68).jpg" },
                { "id": 4455, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (69).jpg" },
                { "id": 4456, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (70).jpg" },
                { "id": 4457, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (71).jpg" },
                { "id": 4458, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 2, "images": "hotelimag/imag (72).jpg" }
            ],
            "distance": "1.5 km from city center", "rating": 4.0, "reviews": 128
          },
          {
            "id": 5, "name": "The Palace-Polokwane", "location": "Polokwane", "address": "42 Ocean View Drive, Waterfront 8001", "description": "Beachfront luxury hotel with stunning views of Table Mountain.", "price_range": { "single": 1800, "double": 2500, "suite": 4000 }, "amenities": ["Free WiFi", "Swimming Pool", "Fitness Center", "Restaurant", "Spa", "Beach Access", "Air Conditioning", "Valet Parking"],
            "room_types": [
                { "id": 51, "type": "Single Room", "description": "Cozy room with single bed, perfect for solo travelers", "price": 1500, "capacity": 1, "images": "hotelimag/imag (73).jpg" },
                { "id": 52, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (74).jpg" },
                { "id": 53, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (75).jpg" },
                { "id": 54, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (76).jpg" },
                { "id": 55, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (77).jpg" },
                { "id": 56, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (78).jpg" },
                { "id": 557, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (79).jpg" },
                { "id": 558, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (80).jpg" },
                { "id": 559, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (81).jpg" },
                { "id": 560, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (82).jpg" },
                { "id": 561, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (83).jpg" },
                { "id": 562, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (84).jpg" },
                { "id": 5563, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (85).jpg" },
                { "id": 5564, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (86).jpg" },
                { "id": 5565, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (87).jpg" },
                { "id": 5566, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (89).jpg" },
                { "id": 5567, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (90).jpg" },
                { "id": 5568, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (91).jpg" }
            ],
            "distance": "1.5 km from city center", "rating": 4.9, "reviews": 128
          },
          {
            "id": 6, "name": "The Palace Pretoria", "location": "Pretoria", "address": "42 Ocean View Drive, Waterfront 8001", "description": "Beachfront luxury hotel with stunning views of Table Mountain.", "price_range": { "single": 1800, "double": 2500, "suite": 4000 }, "amenities": ["Free WiFi", "Swimming Pool", "Fitness Center", "Restaurant", "Spa", "Beach Access", "Air Conditioning", "Valet Parking"],
            "room_types": [
                { "id": 61, "type": "Single Room", "description": "Cozy room with single bed, perfect for solo travelers", "price": 1500, "capacity": 1, "images": "hotelimag/imag (92).jpg" },
                { "id": 62, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (93).jpg" },
                { "id": 63, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (94).jpg" },
                { "id": 64, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (95).jpg" },
                { "id": 65, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (96).jpg" },
                { "id": 66, "type": "Single Room", "description": "Ocean view room with single bed", "price": 1800, "capacity": 1, "images": "hotelimag/imag (97).jpg" },
                { "id": 667, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (98).jpg" },
                { "id": 668, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (99).jpg" },
                { "id": 669, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (99).jpg" },
                { "id": 670, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (100).jpg" },
                { "id": 671, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (101).jpg" },
                { "id": 672, "type": "Double Room", "description": "Spacious room with queen bed, ideal for couples", "price": 2200, "capacity": 2, "images": "hotelimag/imag (102).jpg" },
                { "id": 6673, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (103).jpg" },
                { "id": 6674, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (104).jpg" },
                { "id": 6675, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (105).jpg" },
                { "id": 6676, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (106).jpg" },
                { "id": 6677, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (107).jpg" },
                { "id": 6678, "type": "Suites", "description": "Luxurious suite with separate living area and premium amenities", "price": 3500, "capacity": 5, "images": "hotelimag/imag (108).jpg" }
            ],
            "distance": "1.5 km from city center", "rating": 4.6, "reviews": 128
          }
        ];

        let allFlattenedRoomTypes = []; 

        const fakeReviews = [
            { name: "Alex .", rating: 5, comment: "Absolutely wonderful stay! The room was spotless and the staff were incredibly attentive. Loved the amenities!" },
            { name: "Hope Gopolang.", rating: 4, comment: "Great location and comfortable room. The breakfast was delicious. Would recommend." },
            { name: "Kea .", rating: 5, comment: "Exceeded all expectations. Beautiful hotel, fantastic service. The view from our room was breathtaking." },
            { name: "Forget M.", rating: 4, comment: "Very pleasant hotel. The room was spacious and clean. Good value for money."}
        ];

        // Function to display individual room types
        function displayRoomTypes(roomTypeList) {
            const roomTypesContainer = document.getElementById('room-types-container-grid'); 
            const loadingMessageElement = document.getElementById('loading-message'); 
            
            if (!roomTypesContainer) {
                console.error("Room types container (room-types-container-grid) not found!");
                if(loadingMessageElement) loadingMessageElement.textContent = "Critical error: Display area not found.";
                return;
            }
            
            roomTypesContainer.innerHTML = ''; 

            if (!roomTypeList || roomTypeList.length === 0) {
                roomTypesContainer.innerHTML = '<p id="loading-message" style="text-align:center; grid-column: 1 / -1;">No hotel rooms found matching your criteria.</p>';
                return;
            }
            
            if (loadingMessageElement) loadingMessageElement.style.display = 'none';

            roomTypeList.forEach(item => { 
                let imageUrl = item.roomImage || 'https://placehold.co/600x400/E0E0E0/B0B0B0?text=Image+Not+Available'; 
                
                const roomCard = document.createElement('div');
                roomCard.className = 'dynamic-hotel-card'; 
                
                const roomSpecificDescription = item.roomDescription || "A comfortable room at " + item.hotelName;
                const shortDescription = roomSpecificDescription.length > 100 ? roomSpecificDescription.substring(0, 97) + "..." : roomSpecificDescription;

                // The button now calls openRoomModal with the item
                roomCard.innerHTML = `
                    <div class="dynamic-hotel-image" style="background-image: url('${imageUrl}');" onerror="this.style.backgroundImage='url(https://placehold.co/600x400/E0E0E0/B0B0B0?text=Image+Error)'"></div>
                    <div class="dynamic-hotel-content">
                        <h3>
                            ${item.hotelName}
                            <span class="room-type-subtitle">${item.roomType}</span>
                        </h3>
                         <div class="dynamic-hotel-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${item.hotelAddress ? item.hotelAddress : (item.hotelLocation || 'Location not specified')}</span>
                        </div>
                        <p class="hotel-description" title="${roomSpecificDescription}">${shortDescription}</p>
                        <div class="dynamic-hotel-meta">
                            <span class="dynamic-hotel-price">R${item.roomPrice ? item.roomPrice : 'N/A'}/night</span>
                            ${item.hotelRating ? `<span class="hotel-rating"><i class="fas fa-star"></i> ${item.hotelRating} (${item.hotelReviews || 0} reviews)</span>` : ''}
                        </div>
                        <button class="dynamic-book-offer" data-roomid="${item.roomId}" data-hotelid="${item.hotelId}">View Details & Book</button>
                    </div>
                `;
                roomTypesContainer.appendChild(roomCard);
                // Add event listener for button
                roomCard.querySelector('.dynamic-book-offer').addEventListener('click', function() {
                    openRoomModal(item); 
                });
            });
        }
        
        // Opens and populates the modal
        function openRoomModal(roomItem) {
            document.getElementById('modalRoomImage').src = roomItem.roomImage || 'https://placehold.co/600x400/E0E0E0/B0B0B0?text=No+Image';
            document.getElementById('modalHotelName').textContent = roomItem.hotelName;
            document.getElementById('modalRoomType').textContent = roomItem.roomType;
            document.getElementById('modalRoomPrice').textContent = `R${roomItem.roomPrice || 'N/A'}/night`;
            document.getElementById('modalHotelAddress').textContent = roomItem.hotelAddress || roomItem.hotelLocation || 'N/A';
            document.getElementById('modalRoomCapacity').textContent = roomItem.roomCapacity || 'N/A';
            document.getElementById('modalHotelRating').textContent = roomItem.hotelRating || 'N/A';
            document.getElementById('modalHotelReviews').textContent = roomItem.hotelReviews || '0';
            document.getElementById('modalHotelDistance').textContent = roomItem.hotelDistance || 'N/A';
            document.getElementById('modalRoomDescription').textContent = roomItem.roomDescription || 'No specific room description available.';
            document.getElementById('modalHotelOverallDescription').textContent = roomItem.hotelOverallDescription || 'No overall hotel description available.';

            const amenitiesList = document.getElementById('modalAmenitiesList');
            amenitiesList.innerHTML = '';
            if (roomItem.hotelAmenities && roomItem.hotelAmenities.length > 0) {
                roomItem.hotelAmenities.forEach(amenity => {
                    const li = document.createElement('li');
                    // Simple icons based on keywords - can be expanded
                    let iconClass = 'fa-check-circle';
                    if (amenity.toLowerCase().includes('wifi')) iconClass = 'fa-wifi';
                    else if (amenity.toLowerCase().includes('pool')) iconClass = 'fa-swimmer';
                    else if (amenity.toLowerCase().includes('parking')) iconClass = 'fa-parking';
                    else if (amenity.toLowerCase().includes('restaurant')) iconClass = 'fa-utensils';
                    else if (amenity.toLowerCase().includes('spa')) iconClass = 'fa-spa';
                    else if (amenity.toLowerCase().includes('fitness') || amenity.toLowerCase().includes('gym')) iconClass = 'fa-dumbbell';
                    
                    li.innerHTML = `<i class="fas ${iconClass}"></i> ${amenity}`;
                    amenitiesList.appendChild(li);
                });
            } else {
                amenitiesList.innerHTML = '<li>No amenities listed.</li>';
            }

            const reviewsContainer = document.getElementById('modalReviewsContainer');
            reviewsContainer.innerHTML = '';
            fakeReviews.forEach(review => {
                const reviewDiv = document.createElement('div');
                reviewDiv.className = 'review-item';
                let starsHTML = '';
                for (let i = 0; i < 5; i++) {
                    starsHTML += `<i class="fas fa-star${i < review.rating ? '' : ' far'}"></i> `;

                reviewDiv.innerHTML = `
                    <p>"${review.comment}"</p>
                    <div class="review-stars">${starsHTML}</div>
                    <p class="reviewer-name">- ${review.name}</p>
                `;
                reviewsContainer.appendChild(reviewDiv);
                }
            });

            document.getElementById('roomDetailModal').classList.add('active');
            document.body.style.overflow = 'hidden'; 
        }

        // Function to close the modal
        function closeRoomModal() {
            document.getElementById('roomDetailModal').classList.remove('active');
            document.body.style.overflow = 'auto'; 
        }

        // Close modal if scren beside it is clicked
        document.getElementById('roomDetailModal').addEventListener('click', function(event) {
            if (event.target === this) { 
                closeRoomModal();
            }
        });


        document.addEventListener('DOMContentLoaded', () => {
            const loadingMessageElement = document.getElementById('loading-message'); 

            embeddedHotelsData.forEach(hotel => {
                if (hotel.room_types && hotel.room_types.length > 0) {
                    hotel.room_types.forEach(room_type => {
                        allFlattenedRoomTypes.push({
                            hotelId: hotel.id,
                            hotelName: hotel.name,
                            hotelLocation: hotel.location,
                            hotelAddress: hotel.address,
                            hotelRating: hotel.rating,
                            hotelReviews: hotel.reviews,
                            hotelAmenities: hotel.amenities, 
                            hotelOverallDescription: hotel.description, 
                            hotelDistance: hotel.distance, 
                            roomId: room_type.id,
                            roomType: room_type.type,
                            roomDescription: room_type.description,
                            roomPrice: room_type.price,
                            roomCapacity: room_type.capacity,
                            roomImage: room_type.images 
                        });
                    });
                } else {
                     console.warn(`Hotel "${hotel.name}" (ID: ${hotel.id}) has no room_types array or it's empty.`);
                }
            });
            
            if (allFlattenedRoomTypes.length > 0) {
                if (loadingMessageElement) loadingMessageElement.style.display = 'none';
                displayRoomTypes(allFlattenedRoomTypes); 
            } else {
                console.error("No displayable hotel rooms found in the embedded data.");
                if (loadingMessageElement) {
                    loadingMessageElement.textContent = "No hotel rooms are currently available.";
                    loadingMessageElement.style.color = "orange"; 
                    loadingMessageElement.style.display = "block"; 
                }
            }
            
            const searchLocation = sessionStorage.getItem('searchLocation');
            const searchType = sessionStorage.getItem('searchType');

            if (searchLocation && searchLocation !== "all") { 
                document.getElementById('search-location').value = searchLocation;
            }
            if (searchType && searchType !== "all") { 
                 document.getElementById('search-room-type').value = searchType;
            }
            
            if (allFlattenedRoomTypes.length > 0 && ( (searchLocation && searchLocation !== "all") || (searchType && searchType !== "all") ) ) {
                filterRoomTypes();
            }
            
        });

        // Function to filter individual room types
        function filterRoomTypes() {
            const locationFilter = document.getElementById('search-location').value;
            const roomTypeFilter = document.getElementById('search-room-type').value;

            const filteredRoomTypes = allFlattenedRoomTypes.filter(item => {
                const matchesLocation = !locationFilter || locationFilter === "all" || (item.hotelLocation && item.hotelLocation.toLowerCase() === locationFilter.toLowerCase());
                const matchesRoomType = !roomTypeFilter || roomTypeFilter === "all" || (item.roomType && item.roomType.toLowerCase() === roomTypeFilter.toLowerCase());
                
                return matchesLocation && matchesRoomType;
            });

            displayRoomTypes(filteredRoomTypes);
        }

    </script>
</body>
</html>
